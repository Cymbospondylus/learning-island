flowchart TD
    A([开始]) --> B{用户类型}
    B -->|学生| C[微信小程序入口]
    B -->|教师/管理员| D[PC端入口]

    C --> E{是否已绑定}
    E -->|已绑定| F[微信自动登录]
    E -->|未绑定| G[跳转绑定页面]

    G --> H[输入账号密码]
    H --> I[验证身份]
    I -->|成功| J[绑定微信OpenID]
    I -->|失败| K[提示错误信息]

    D --> L[输入账号密码]
    L --> M[系统验证]
    M -->|成功| N[生成Token]
    M -->|失败| P[提示错误信息]

    F --> N
    J --> N
    N --> O([结束])